        <div class="title">ADC</div>
        <div class="step-block">
            <ul>
               <li><div class="text">En este proyecto vas a conocer un nuevo componente hardware, el componente ADC (Analog to Digital Converter)</div></li>
               <li><div class="text">Sirve para leer señales analógicas y convertirlas a un valor digital</div></li>
               <li><div class="text">En este proyecto vamos a medir la señal analógica de un potenciómetro</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/Poti.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/P017_ADC.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Un potenciómetro es una resistencia variable. Tiene 3 terminales. Los terminales de los extremos se conectan a masa y alimentación. El terminal del centro da el valor variable</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/Poti2a.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Vamos a hacer un programa que lea continuamente el valor analógico del potenciómetro y lo convierte a voltaje</div></li>
            </ul>
        </div>
        <div class="section">Pasos</div>
        <div class="step-block">
            <ul>
               <li><div class="text">Crea un proyecto vacío y nómbralo como WS017</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/01.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/02.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/03.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/04.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Añade una entrada digital</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/05.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Edita sus propiedades</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/06.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Habilita el tipo "Analog" y habilita "External terminal" para poder conectarle un potenciómetro</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/07.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Añade un potenciómetro (fíjate que es un componente "Off-Chip", es sólo para documentación)</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/08.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/09.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Añade alimentación</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/10.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Edita sus propiedades</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/11.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Pon el parámetro "Instance_Name_Visible" a "false"</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/12.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/13.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/14.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Añade masa</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/15.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Conecta el potenciómetro al pin de entrada</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/16.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/17.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Añade el componente ADC</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/18.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/19.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Edita sus propiedades</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/20.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Hacemos SPS (Samples per seconds número de veces que queremos medir por segundo) = 1000. Habrá una nueva medida cada 1 milisegundo</div></li>
            </ul>
            <table class="standard-table">
                <tr>
                    <th>Parámetro</th>
                    <th>Valor</th>
                    <th>Descripción</th>
                </tr>
                <tr>
                    <td>Channel sample rate (SPS)</td>
                    <td>1000</td>
                    <td>Muestras por segundo</td>
                </tr>
                <tr>
                    <td>Vref select</td>
                    <td>VDDA (3.3V)</td>
                    <td>Voltaje máximo</td>
                </tr>
                <tr>
                    <td>Single ended negative input</td>
                    <td>Vss (0v)</td>
                    <td>Voltaje mínimo</td>
                </tr>
                <tr>
                    <td>Samples averaged</td>
                    <td>64</td>
                    <td>Va a medir 64 veces y calculará la media</td>
                </tr>
            </table>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/21.png">
        </div>
        <div class="step-block">
            <table class="standard-table">
                <tr>
                    <th>Parámetro</th>
                    <th>Valor</th>
                    <th>Descripción</th>
                </tr>
                <tr>
                    <td>Sequenced channels</td>
                    <td>1</td>
                    <td>Número de canales analógicos a medir</td>
                </tr>
                <tr>
                    <td>Channel</td>
                    <td>0</td>
                    <td>Canal ADC</td>
                </tr>
                <tr>
                    <td>Mode</td>
                    <td>Single (single ended)</td>
                    <td>La medida se realiza respecto a Vss (masa)</td>
                </tr>
                <tr>
                    <td>AVG (Average-media)</td>
                    <td>Habilitado</td>
                    <td>Va a calcular la media</td>
                </tr>
            </table>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/22.png">
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/23.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Conecta la entrada "Vin" al componente ADC</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/24.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Asigna la entrada "Vin" al pin P2[0]</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/25.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Añade el siguiente código a "main.c"</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/35.png">
            <table class="source-code-table">
                  <tr>
                      <td>12</td>
                      <td>#include &ltproject.h&gt</td>
                  </tr>
                  <tr>
                      <td>13</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>14</td>
                      <td>#define <span class="b1">POT_CHAN<span class="tooltiptext"> Define la constante POT_CHAN como 0 (es el canal ADC usado)</span></span>    (0)</td>
                  </tr>
                  <tr>
                      <td>15</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>16</td>
                      <td>int main()</td>
                  </tr>
                  <tr>
                      <td>17</td>
                      <td>{</td>
                  </tr>
                  <tr>
                      <td>18</td>
                      <td>    volatile int16  <span class="b2">i16Counts<span class="tooltiptext"> Almacena el valor leído del ADC (0..2047)</span></span>;</td>
                  </tr>
                  <tr>
                      <td>19</td>
                      <td>    volatile int16  <span class="b3">i16mVolts<span class="tooltiptext"> Almacena el valor leído del ADC, convertido a milivoltios (0..3300)</span></span>;</td>
                  </tr>
                  <tr>
                      <td>20</td>
                      <td>    </td>
                  </tr>
                  <tr>
                      <td>21</td>
                      <td>    CyGlobalIntEnable; /* Enable global interrupts. */</td>
                  </tr>
                  <tr>
                      <td>22</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>23</td>
                      <td>    <span class="b4">ADC_Start()<span class="tooltiptext"> Inicializa el componente ADC</span></span>;</td>
                  </tr>
                  <tr>
                      <td>24</td>
                      <td>    <span class="b5">ADC_StartConvert()<span class="tooltiptext"> Comienza el proceso de conversión, lo hará de forma continua (Free Running Mode)</span></span>;</td>
                  </tr>
                  <tr>
                      <td>25</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>26</td>
                      <td>    for(;;)</td>
                  </tr>
                  <tr>
                      <td>27</td>
                      <td>    {</td>
                  </tr>
                  <tr>
                      <td>28</td>
                      <td>        i16Counts   =   <span class="b6">ADC_GetResult16<span class="tooltiptext"> Obtiene el último valor medido por el ADC</span></span>(POT_CHAN);</td>
                  </tr>
                  <tr>
                      <td>29</td>
                      <td>        i16mVolts   =   <span class="b1">ADC_CountsTo_mVolts<span class="tooltiptext"> Convierte el valor a milivoltios</span></span>(POT_CHAN,i16Counts);</td>
                  </tr>
                  <tr>
                      <td>30</td>
                      <td>    }</td>
                  </tr>
                  <tr>
                      <td>31</td>
                      <td>}</td>
                  </tr>
            </table>
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Mueve el potenciómetro a la posición de masa</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/Poti2b.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Depura el proyecto y pon un breakpoint en la línea 30</div></li>
               <li><div class="text">La variable "i16Counts" vale -3, todos los valores por debajo de 0 son ruido</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/31.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">La variable "i16mVolts" es -5 milivoltios</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/32.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Mueve el potenciómetro a la posición intermedia</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/Poti2a.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">La variable "i16Counts" vale 1008 (que es aproximadamente la mitad del valor máximo que es 2047</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/27.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">La variable "i16mVolts" es 1624 milivoltios (que es aproximadamente la mitad del valor máximo que es 3.3V)</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/28.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Mueve el potenciómetro a la posición de Vdd</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/Poti2c.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">La variable "i16Counts" vale 2047 (que es el valor máximo)</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/29.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">La variable "i16mVolts" es 3298 milivoltios (que es casi el valor máximo 3300)</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/30.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">El valor máximo es 2047 que corresponde a 11 bits. ¿Por qué no se usan los 12 bits?</div></li>
               <li><div class="text">Si miras en el datasheet del componente ADC :</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/21a.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Puedes ver que el valor máximo para la configuración elegida es 0x07FF que corresponde a 11 bits</div></li>
            </ul>
            <img class="img" src="../courses/01_PSoC4/Seccion05/L17_ADC/img/34.png">
        </div>
        <div class="section">Descargas</div>
        <div class="step-block">
            <ul>
               <li><a target="_blank" href="../courses/01_PSoC4/Seccion05/L17_ADC/downloads/WS017.zip">Descarga el proyecto aquí (PSoC Creator 3.3).</a></li>
            </ul>
        </div>
