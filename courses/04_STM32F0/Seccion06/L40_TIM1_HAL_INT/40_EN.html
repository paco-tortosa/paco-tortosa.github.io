        <div class="title">Square signal (HAL-INT)</div>
       <div class="mppro_section">MPPRO section = IDE</div>
       <div class="mppro_section">MPPRO video = 03_Camtasia\01_cam_IDE.mp4|0</div>
        <div class="step-block">
            <ul>
               <li><div class="text">In this lesson we are going to use interrupts to blink the led instead of using a loop as in the previous lesson.</div></li>
               <li><div class="text">Every time that the register <b>CNT</b> of <b>TIM1</b> reaches 0 an interrupt will be generated, and in the Interrupt Service Routine we will toggle the led.</div></li>
            </ul>
        </div>
        <div class="title">Steps</div>
        <div class="step-block">
            <ul>
               <li><div class="text">Create a new project based on the evaluation kit and give it the name <b>P20_TIM1_HAL_INT</b>.</div></li>
            </ul>
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/01.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/02.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/03.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/04.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/05.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Let&#39s configure the <b>TIM1</b> as in the previous lesson.</div></li>
            </ul>
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/06.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/07.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/08.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/09.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/10.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/11.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Now let&#39s enable the interrupt generated by the flag <b>UIF</b>.</div></li>
            </ul>
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/12.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/13.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Generate the configuration source code.</div></li>
            </ul>
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/14.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/15.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Let&#39s add our source code in the file <b>main.c</b></div></li>
            </ul>
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/16.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/17.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/18.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">First we are to initialize the timer by using the function <b>HAL_TIM_Base_Start_IT</b> that is going to initialize the timer and enable the interrupt of the timer.</div></li>
            </ul>
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/19.png">
            <table class="source-code-table">
                  <tr>
                      <td>103</td>
                      <td>  /* Infinite loop */</td>
                  </tr>
                  <tr>
                      <td>104</td>
                      <td>  /* USER CODE BEGIN WHILE */</td>
                  </tr>
                  <tr>
                      <td>105</td>
                      <td>  <span class="b1">HAL_TIM_Base_Start_IT<span class="tooltiptext">Initialize the <b>TIM1</b> and enable the interrupt.</span></span>( &htim1 );</td>
                  </tr>
                  <tr>
                      <td>106</td>
                      <td>  while (1)</td>
                  </tr>
                  <tr>
                      <td>107</td>
                      <td>  {</td>
                  </tr>
                  <tr>
                      <td>108</td>
                      <td>    /* USER CODE END WHILE */</td>
                  </tr>
                  <tr>
                      <td>109</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>110</td>
                      <td>    /* USER CODE BEGIN 3 */</td>
                  </tr>
                  <tr>
                      <td>111</td>
                      <td>  }</td>
                  </tr>
            </table>
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Now add the ISR (Interrupt Service Routine).</div></li>
            </ul>
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/20.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/21.png">
            <table class="source-code-table">
                  <tr>
                      <td>61</td>
                      <td>/* Private user code -----------------*/</td>
                  </tr>
                  <tr>
                      <td>62</td>
                      <td>/* USER CODE BEGIN 0 */</td>
                  </tr>
                  <tr>
                      <td>63</td>
                      <td>void <span class="b4">HAL_TIM_PeriodElapsedCallback<span class="tooltiptext">This is the callback function that the HAL calls in case of a timer interrupt.</span></span>(TIM_HandleTypeDef *htim)</td>
                  </tr>
                  <tr>
                      <td>64</td>
                      <td>{</td>
                  </tr>
                  <tr>
                      <td>65</td>
                      <td>    //Toggle LED</td>
                  </tr>
                  <tr>
                      <td>66</td>
                      <td>    <span class="b5">HAL_GPIO_TogglePin<span class="tooltiptext">Toggle the pin <b>PA5</b>.</span></span>(GPIOA, GPIO_PIN_5);</td>
                  </tr>
                  <tr>
                      <td>67</td>
                      <td><span class="b6">}<span class="tooltiptext">You do not need to clean the flag <b>UIF</b>, the HAL makes it for us.</span></span></td>
                  </tr>
                  <tr>
                      <td>68</td>
                      <td>/* USER CODE END 0 */</td>
                  </tr>
                  <tr>
                      <td>69</td>
                      <td></td>
                  </tr>
            </table>
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">You can build and debug the program.</div></li>
            </ul>
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/22.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/23.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/24.png">
            <img class="img" src="../courses/04_STM32F0/Seccion06/L40_TIM1_HAL_INT/img/25.png">
        </div>
