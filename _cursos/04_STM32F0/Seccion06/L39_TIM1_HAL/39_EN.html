        <div class="title">Square signal (HAL)</div>
        <div class="step-block">
            <ul>
               <li><div class="text">In this lesson we are going to see another way of implementing the program of the previous lesson, this time using the HAL.</div></li>
            </ul>
        </div>
        <div class="title">Steps</div>
        <div class="step-block">
            <ul>
               <li><div class="text">Create a new project.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/01.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Select the evaluation kit.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/02.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/03.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/04.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">The name for the project will be <b>P19_TIM1_HAL</b>.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/05.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/06.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Go to the configuration of <b>TIM1</b>.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/07.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Select as Clock Source the Internal Clock.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/08.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">In the lower pane the parameters of <b>TIM1</b> can be configured.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/09.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Configure the <b>Prescaler</b> as 47, the <b>Counter mode</b> as descending and the <b>Counter period</b> as 150.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/10.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Generate the inicialization code.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/11.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/12.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Go to the file <b>main.c</b></div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/13.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/14.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">A function called <b>MX_TIM1_Init</b> has been created to initialize the timer <b>TIM1</b>.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/15.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">You can see on the source code the parameters that we enter in the configurator.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/16.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">We are going to add our source code.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/17.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/18.png">
            <table class="source-code-table">
                  <tr>
                      <td>103</td>
                      <td>  /* Infinite loop */</td>
                  </tr>
                  <tr>
                      <td>104</td>
                      <td>  /* USER CODE BEGIN WHILE */</td>
                  </tr>
                  <tr>
                      <td>105</td>
                      <td>  <span class="b1">HAL_TIM_Base_Start<span class="tooltiptext">The function <b>HAL_TIM_Base_Start</b> initializes the timer <b>TIM1</b>.</span></span>( &<span class="b2">htim1<span class="tooltiptext">The configuration parameters are in <b>htim1</b> </span></span> );</td>
                  </tr>
                  <tr>
                      <td>106</td>
                      <td>  while (1)</td>
                  </tr>
                  <tr>
                      <td>107</td>
                      <td>  {</td>
                  </tr>
                  <tr>
                      <td>108</td>
                      <td>      <span class="b3">__HAL_TIM_CLEAR_FLAG( &htim1, TIM_FLAG_UPDATE)<span class="tooltiptext">Clear the flag <b>UIF</b>.</span></span>;</td>
                  </tr>
                  <tr>
                      <td>109</td>
                      <td>      while( <span class="b4">__HAL_TIM_GET_FLAG( &htim1, TIM_FLAG_UPDATE)<span class="tooltiptext">With the function <b>__HAL_TIM_GET_FLAG</b> we get the value of the bit <b>UIF</b> of the status register <b>SR</b>.</span></span> == RESET )<span class="b5">;<span class="tooltiptext">While the flag is 0, we stay inside the loop. (<b>;</b> is an empty statement).</span></span></td>
                  </tr>
                  <tr>
                      <td>110</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>111</td>
                      <td>      //Toggle LED</td>
                  </tr>
                  <tr>
                      <td>112</td>
                      <td>      <span class="b6">HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_5)<span class="tooltiptext">We reach this instruction when the bit <b>UIF</b> is 1, indicating that the register <b>CNT</b> reached 0. Toggle the pin <b>PA5</b>.</span></span>;</td>
                  </tr>
                  <tr>
                      <td>113</td>
                      <td>    /* USER CODE END WHILE */</td>
                  </tr>
                  <tr>
                      <td>114</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>115</td>
                      <td>    /* USER CODE BEGIN 3 */</td>
                  </tr>
                  <tr>
                      <td>116</td>
                      <td>  }</td>
                  </tr>
            </table>
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Build and debug the program.</div></li>
            </ul>
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/19.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/20.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/21.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/22.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/23.png">
            <img class="img" src="../_cursos/04_STM32F0/Seccion06/L39_TIM1_HAL/img/24.png">
        </div>
