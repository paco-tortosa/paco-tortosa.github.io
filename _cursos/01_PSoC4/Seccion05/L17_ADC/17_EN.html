        <div class="title">ADC</div>
        <div class="step-block">
            <ul>
               <li><div class="text">In this project you will learn a new HW component, the ADC (Analog to Digital Converter) component</div></li>
               <li><div class="text">It measures an analog signal and it converts it into a digital value</div></li>
               <li><div class="text">In this project you will measure the analog signal from a potentiometer</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/Poti.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/P017_ADC.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">A potentiometer is a variable resistor. It has 3 terminals. One end terminal is connected to Vdd (3.3V), the other end terminal to ground (0V) and the mid terminal is the variable voltage</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/Poti2a.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">You will make a program to read continously the analog value of a potentiometer and it will convert to voltage</div></li>
            </ul>
        </div>
        <div class="section">Steps</div>
        <div class="step-block">
            <ul>
               <li><div class="text">Create an empty project and name it as WS017</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/01.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/02.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/03.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/04.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Add a digital input</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/05.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Edit its properties</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/06.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Enable the type "Analog" and enable also "External terminal" to connect it to a potentiometer</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/07.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Add a potentiometer (note that this is an "Off-Chip" component, so it is only for documentation purposes)</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/08.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/09.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Add power</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/10.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Edit its properties</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/11.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Set the "Instance_Name_Visible" parameter to "false"</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/12.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/13.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/14.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Add ground</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/15.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Connect the potentiometer to the input pin</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/16.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/17.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Add the ADC component</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/18.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/19.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Edit its properties</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/20.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Make SPS (Samples per second, times you want to measure per second) = 1000. It will be a new measurement every 1 millisecond</div></li>
            </ul>
            <table class="standard-table">
                <tr>
                    <th>Parameter</th>
                    <th>Value</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Channel sample rate (SPS)</td>
                    <td>1000</td>
                    <td>Samples per second</td>
                </tr>
                <tr>
                    <td>Vref select</td>
                    <td>VDDA (3.3V)</td>
                    <td>Maximum voltage</td>
                </tr>
                <tr>
                    <td>Single ended negative input</td>
                    <td>Vss (0v)</td>
                    <td>Minimum voltage</td>
                </tr>
                <tr>
                    <td>Samples averaged</td>
                    <td>64</td>
                    <td>It measures 64 times, and it calculates the average </td>
                </tr>
            </table>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/21.png">
        </div>
        <div class="step-block">
            <table class="standard-table">
                <tr>
                    <th>Parameter</th>
                    <th>Value</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Sequenced channels</td>
                    <td>1</td>
                    <td>Analog channels count to measure</td>
                </tr>
                <tr>
                    <td>Channel</td>
                    <td>0</td>
                    <td>ADC channel</td>
                </tr>
                <tr>
                    <td>Mode</td>
                    <td>Single (single ended)</td>
                    <td>The measure is refered to Vss (ground)</td>
                </tr>
                <tr>
                    <td>AVG (Average)</td>
                    <td>Enabled</td>
                    <td>It will calculate the average</td>
                </tr>
            </table>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/22.png">
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/23.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Connect the input "Vin" to the ADC component</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/24.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Assign the input "Vin" to the pin P2[0]</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/25.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Add the following code to "main.c"</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/35.png">
            <table class="source-code-table">
                  <tr>
                      <td>12</td>
                      <td>#include &ltproject.h&gt</td>
                  </tr>
                  <tr>
                      <td>13</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>14</td>
                      <td>#define <span class="b1">POT_CHAN<span class="tooltiptext"> Defines the constant POT_CHAN as 0 (it is the ADC channed used)</span></span>    (0)</td>
                  </tr>
                  <tr>
                      <td>15</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>16</td>
                      <td>int main()</td>
                  </tr>
                  <tr>
                      <td>17</td>
                      <td>{</td>
                  </tr>
                  <tr>
                      <td>18</td>
                      <td>    volatile int16  <span class="b2">i16Counts<span class="tooltiptext"> Stores the value read from ADC  (0..2047)</span></span>;</td>
                  </tr>
                  <tr>
                      <td>19</td>
                      <td>    volatile int16  <span class="b3">i16mVolts<span class="tooltiptext"> Stores the value read from ADC, converted into millivolts  (0..3300)</span></span>;</td>
                  </tr>
                  <tr>
                      <td>20</td>
                      <td>    </td>
                  </tr>
                  <tr>
                      <td>21</td>
                      <td>    CyGlobalIntEnable; /* Enable global interrupts. */</td>
                  </tr>
                  <tr>
                      <td>22</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>23</td>
                      <td>    <span class="b4">ADC_Start()<span class="tooltiptext"> Initialize the ADC component</span></span>;</td>
                  </tr>
                  <tr>
                      <td>24</td>
                      <td>    <span class="b5">ADC_StartConvert()<span class="tooltiptext"> Starts the conversion process, in a continuous mode (Free Running Mode)</span></span>;</td>
                  </tr>
                  <tr>
                      <td>25</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>26</td>
                      <td>    for(;;)</td>
                  </tr>
                  <tr>
                      <td>27</td>
                      <td>    {</td>
                  </tr>
                  <tr>
                      <td>28</td>
                      <td>        i16Counts   =   <span class="b6">ADC_GetResult16<span class="tooltiptext"> Gets the last value measured by the ADC</span></span>(POT_CHAN);</td>
                  </tr>
                  <tr>
                      <td>29</td>
                      <td>        i16mVolts   =   <span class="b1">ADC_CountsTo_mVolts<span class="tooltiptext"> Converts the value to millivolts</span></span>(POT_CHAN,i16Counts);</td>
                  </tr>
                  <tr>
                      <td>30</td>
                      <td>    }</td>
                  </tr>
                  <tr>
                      <td>31</td>
                      <td>}</td>
                  </tr>
            </table>
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Move the wiper to the ground position</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/Poti2b.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Debug the project and set a breakpoint on the line 30</div></li>
               <li><div class="text">The variable "i16Counts" is -3, all values under 0 are noise</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/31.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">The variable "i16mVolts" is -5 millivolts</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/32.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Move the wiper to the mid position</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/Poti2a.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">The variable "i16Counts" is 1008 (that is around the half of the maximum value that is 2047)</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/27.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">The variable "i16mVolts" is 1624 millivolts (around the half of the max value that is 3.3V)</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/28.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">Move the wiper to the Vdd position</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/Poti2c.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">The variable "i16Counts" is 2047 (max value)</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/29.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">The variable "i16mVolts" is 3298 millivolts (that is almost the max value 3300)</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/30.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">The max value is 2047, that corresponds to 11 bits. Why are not used the 12 bits of the ADC?</div></li>
               <li><div class="text">If you look in the datasheet :</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/21a.png">
        </div>
        <div class="step-block">
            <ul>
               <li><div class="text">You can see that the max value for the selected configuration is 0x07FF (11 bits)</div></li>
            </ul>
            <img class="img" src="../_cursos/01_PSoC4/Seccion05/L17_ADC/img/34.png">
        </div>
        <div class="section">Downloads</div>
        <div class="step-block">
            <ul>
               <li><a target="_blank" href="../_cursos/01_PSoC4/Seccion05/L17_ADC/downloads/WS017.zip">Download the project here (PSoC Creator 3.3).</a></li>
            </ul>
        </div>
